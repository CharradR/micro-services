{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/book.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction BookDetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 1)(1, \"div\", 2);\n    i0.ÉµÉµelement(2, \"img\", 3);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"div\", 4)(4, \"div\", 5)(5, \"div\", 6);\n    i0.ÉµÉµtext(6);\n    i0.ÉµÉµelementStart(7, \"div\", 7);\n    i0.ÉµÉµnamespaceSVG();\n    i0.ÉµÉµelementStart(8, \"svg\", 8);\n    i0.ÉµÉµelement(9, \"path\", 9)(10, \"path\", 10)(11, \"path\", 11);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµnamespaceHTML();\n    i0.ÉµÉµelementStart(12, \"p\");\n    i0.ÉµÉµtext(13);\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµelementStart(14, \"div\", 12)(15, \"div\", 13)(16, \"h4\");\n    i0.ÉµÉµtext(17, \"Category\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(18, \"ul\")(19, \"li\");\n    i0.ÉµÉµtext(20);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(21, \"h4\");\n    i0.ÉµÉµtext(22, \"Quantity\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(23, \"ul\")(24, \"li\");\n    i0.ÉµÉµtext(25);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(26, \"h4\");\n    i0.ÉµÉµtext(27, \"Available\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(28, \"ul\")(29, \"li\");\n    i0.ÉµÉµtext(30);\n    i0.ÉµÉµelementEnd()()()();\n    i0.ÉµÉµelementStart(31, \"input\", 14);\n    i0.ÉµÉµlistener(\"ngModelChange\", function BookDetailsComponent_div_0_Template_input_ngModelChange_31_listener($event) {\n      i0.ÉµÉµrestoreView(_r2);\n      const ctx_r1 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r1.email = $event);\n    });\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(32, \"div\", 15)(33, \"button\", 16);\n    i0.ÉµÉµlistener(\"click\", function BookDetailsComponent_div_0_Template_button_click_33_listener() {\n      i0.ÉµÉµrestoreView(_r2);\n      const ctx_r3 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r3.borrowBook(ctx_r3.book == null ? null : ctx_r3.book.id));\n    });\n    i0.ÉµÉµtext(34, \"Book Now\");\n    i0.ÉµÉµelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"src\", \"assets/images/\" + ctx_r0.book.id + \".png\", i0.ÉµÉµsanitizeUrl);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r0.book.title, \" \");\n    i0.ÉµÉµadvance(7);\n    i0.ÉµÉµtextInterpolate(ctx_r0.book.author);\n    i0.ÉµÉµadvance(7);\n    i0.ÉµÉµtextInterpolate(ctx_r0.book.category);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(ctx_r0.book.quantity);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(ctx_r0.book.available);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngModel\", ctx_r0.email);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"disabled\", !(ctx_r0.book == null ? null : ctx_r0.book.id));\n  }\n}\nexport let BookDetailsComponent = /*#__PURE__*/(() => {\n  class BookDetailsComponent {\n    constructor(route, bookService) {\n      this.route = route;\n      this.bookService = bookService;\n      this.loading = false; // Define the loading property\n      this.email = '';\n    }\n    // ngOnInit(): void {\n    //   const id = this.route.snapshot.paramMap.get('id');\n    //   if (id) {\n    //     this.bookService.getBookById(id).subscribe({\n    //       next: (book) => (this.book = book),\n    //       error: (err) => console.error('Erreur de chargement :', err)\n    //     });\n    //   }\n    // }\n    ngOnInit() {\n      this.loading = true;\n      const id = this.route.snapshot.paramMap.get('id');\n      if (id) {\n        this.bookService.getBookById(id).subscribe({\n          next: book => {\n            this.book = book;\n            this.imageUrl = `assets/images/book-${book.id}.png`; // ðŸ’¡ construit dynamiquement l'URL\n          },\n\n          error: err => console.error('Erreur de chargement :', err)\n        });\n      }\n    }\n    borrowBook(id) {\n      if (!this.email) {\n        alert('Veuillez entrer votre email.');\n        return;\n      }\n      if (!id) {\n        alert('Le livre n\\'est pas disponible.');\n        return;\n      }\n      // this.http.post('/api/loans', {\n      //   bookId: bookId,\n      //   email: this.email\n      // }).subscribe({\n      //   next: () => alert(\"Emprunt effectuÃ© ! VÃ©rifiez votre email.\"),\n      //   error: err => alert(\"Erreur : \" + err.error?.message || err.message)\n      // });\n    }\n\n    static {\n      this.Éµfac = function BookDetailsComponent_Factory(t) {\n        return new (t || BookDetailsComponent)(i0.ÉµÉµdirectiveInject(i1.ActivatedRoute), i0.ÉµÉµdirectiveInject(i2.BookService));\n      };\n    }\n    static {\n      this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n        type: BookDetailsComponent,\n        selectors: [[\"app-book-details\"]],\n        decls: 1,\n        vars: 1,\n        consts: [[\"class\", \"main-content\", 4, \"ngIf\"], [1, \"main-content\"], [1, \"pie-image\"], [\"alt\", \"Book Image\", 3, \"src\"], [1, \"pie-recipe\"], [1, \"pie-recipe__title\"], [1, \"pie-name\"], [1, \"pie-serving\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"enable-background\", \"new 0 0 68 68\", \"viewBox\", \"0 0 68 68\", \"id\", \"ink-bottle\"], [\"d\", \"M52.49 24.36c-.03-.29-.17-.55-.4-.74-.47-.38-1.17-.31-1.55.17-.48.6-8.55 10.7-12.82 20.4 0 .01-.01.02-.01.03-1.84 4.18-2.97 8.28-2.48 11.52.05.34.25.63.56.8.21.12.45.16.69.12.6-.09 1.01-.65.92-1.25-.4-2.61.52-6.07 2.1-9.76.02-.07.04-.14.09-.2 3.37-7.77 9.6-16.47 12.66-20.28C52.44 24.94 52.52 24.65 52.49 24.36zM10.98 30.06c0 1.4 1.14 2.53 2.53 2.53h17.14c.68 0 1.31-.26 1.78-.74.48-.48.75-1.12.75-1.79 0-1.4-1.13-2.53-2.53-2.53H13.51c-.68 0-1.31.26-1.78.74C11.24 28.75 10.98 29.38 10.98 30.06z\"], [\"d\", \"M13.57,65.68h17c4.98,0,9.04-4.06,9.04-9.04v-8.65c-1.01,2.76-1.53,5.29-1.23,7.28c0.17,1.14-0.62,2.22-1.76,2.39\\n                            c-0.11,0.02-0.21,0.02-0.32,0.02c-0.35,0-0.69-0.09-1.01-0.26h0c-0.58-0.32-0.97-0.87-1.06-1.53c-0.51-3.37,0.64-7.61,2.5-11.9\\n                            c-0.05-0.17-0.11-0.34-0.12-0.51c-0.11-0.93-0.21-2.09-0.28-3.4c-0.76-0.36-1.57-0.56-2.43-0.56c-1.86,0-3.49-1.32-3.88-3.15\\n                            l-0.58-2.77H14.71l-0.58,2.77c-0.39,1.82-2.02,3.15-3.88,3.15c-3.16,0-5.72,2.56-5.72,5.71v11.41\\n                            C4.53,61.62,8.59,65.68,13.57,65.68z M10.79,47.55c0-1.73,1.4-3.13,3.13-3.13h16.32c1.73,0,3.13,1.4,3.13,3.13v9.75\\n                            c0,1.72-1.4,3.12-3.13,3.12H13.92c-1.73,0-3.13-1.4-3.13-3.12V47.55z\"], [\"d\", \"M13.92 59.42h16.32c1.17 0 2.13-.95 2.13-2.12v-9.75c0-1.17-.96-2.13-2.13-2.13H13.92c-1.17 0-2.13.96-2.13 2.13v9.75C11.79 58.47 12.74 59.42 13.92 59.42zM28.83 56.86h-6.75c-.28 0-.5-.22-.5-.5 0-.28.22-.5.5-.5h6.75c.28 0 .5.22.5.5C29.33 56.64 29.1 56.86 28.83 56.86zM28.83 52.92h-3.38c-.28 0-.5-.22-.5-.5 0-.28.22-.5.5-.5h3.38c.28 0 .5.22.5.5C29.33 52.7 29.1 52.92 28.83 52.92zM18.53 47.98h10.29c.28 0 .5.22.5.5 0 .28-.22.5-.5.5H18.53c-.28 0-.5-.22-.5-.5C18.03 48.21 18.26 47.98 18.53 47.98zM15.33 47.98h1.17c.28 0 .5.22.5.5 0 .28-.22.5-.5.5h-1.17c-.28 0-.5-.22-.5-.5C14.83 48.21 15.05 47.98 15.33 47.98zM15.33 51.92h8.08c.28 0 .5.22.5.5 0 .28-.22.5-.5.5h-8.08c-.28 0-.5-.22-.5-.5C14.83 52.15 15.05 51.92 15.33 51.92zM15.33 55.86h4.21c.28 0 .5.22.5.5 0 .28-.22.5-.5.5h-4.21c-.28 0-.5-.22-.5-.5C14.83 56.08 15.05 55.86 15.33 55.86zM60.01 23.68l.47.14c.42.12.85-.1.98-.49 2.51-7.52 2.13-15.21 1.68-19.11-.08-.69-.48-1.29-1.1-1.62-.61-.34-1.33-.36-1.96-.05-1.65.8-3.32 1.72-4.96 2.74-.24.15-.38.42-.38.71l.12 3.7c.02.68-.34 1.31-.94 1.63-.6.33-1.33.29-1.89-.11L50 9.78c-.3-.22-.71-.2-.98.04-3.13 2.78-5.63 5.86-7.44 9.13-1.47 2.67-2.58 5.67-3.29 8.92-.07.28.03.57.26.76l.89.76c.52.45.74 1.14.57 1.8-.17.66-.69 1.17-1.36 1.32l-.58.12c-.34.07-.59.36-.62.71-.31 3.55-.17 6.7.05 8.97 4.46-9.39 11.8-18.58 12.26-19.15.73-.9 2.05-1.04 2.95-.32.44.35.71.85.77 1.41s-.1 1.1-.45 1.54c-2.92 3.63-8.78 11.77-12.16 19.15 4.64-2.26 12.93-7.21 17.85-15.54.12-.21.14-.46.06-.7l-.99-2.69c-.23-.65-.08-1.35.39-1.85C58.65 23.66 59.35 23.48 60.01 23.68z\"], [1, \"pie-recipe__ingredients\"], [1, \"pie-recipe__ingredients__item\"], [\"type\", \"email\", \"placeholder\", \"Votre email\", 3, \"ngModel\", \"ngModelChange\"], [1, \"pie-recipe__subtitle\"], [1, \"booking\", 3, \"disabled\", \"click\"]],\n        template: function BookDetailsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ÉµÉµtemplate(0, BookDetailsComponent_div_0_Template, 35, 8, \"div\", 0);\n          }\n          if (rf & 2) {\n            i0.ÉµÉµproperty(\"ngIf\", ctx.book);\n          }\n        },\n        dependencies: [i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n        styles: [\"aside.context[_ngcontent-%COMP%]{text-align:left;text-transform:none;padding-right:20px;color:#333}aside.context[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#333;padding:3px 0;border-bottom:1px dashed}aside.context[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{border-bottom:1px solid}footer[_ngcontent-%COMP%]{text-align:center;width:100%}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block;width:30px;height:30px;border-radius:50%;background:transparent;border:1px dashed #333;color:#333;margin:0 3px}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.05)}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{margin-top:8px;display:inline-block;font-size:14px}.main-content[_ngcontent-%COMP%]{display:grid;grid-template-areas:\\\"navigation pie-recipe pie-image\\\" \\\"context context pie-image\\\";grid-template-columns:min-content auto 35%;grid-template-rows:auto min-content;margin:100px auto auto;min-height:100vh;max-height:calc(100vh - 4em);background:#fff;box-shadow:0 15px 35px #32325d1a,0 5px 15px #00000012}.context__wrapper[_ngcontent-%COMP%]{grid-area:context;background:#f7f7f7;color:#333;padding:15px 20px;font:400 12px/1.2 Raleway,sans-serif;display:grid;align-items:center;grid-template-columns:auto max-content}.booking[_ngcontent-%COMP%]{border-radius:25px;color:#fff;background-color:#015804;padding:20px}.pie-image[_ngcontent-%COMP%]{grid-area:pie-image}.pie-name[_ngcontent-%COMP%]{font:900 45px Raleway;text-transform:uppercase;margin:20px 0 5px;letter-spacing:2px;color:#285f30;position:relative}.pie-serving[_ngcontent-%COMP%]{font:400 16px Raleway;color:#916953;margin:20px 0;max-width:300px}.pie-serving[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px}.pie-serving[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#916953}.pie-serving[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin:12px 6px 6px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#dbc7b1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#d69762}.pie-recipe[_ngcontent-%COMP%]{grid-area:pie-recipe;color:#999;overflow-y:auto;overflow-x:hidden;margin:5px;max-height:100%;padding:50px 60px;display:grid;grid-gap:20px;grid-template-columns:30px auto;grid-template-rows:repeat(4,max-content);line-height:1.6}.pie-recipe__title[_ngcontent-%COMP%]{grid-column:span 2}.pie-recipe__ingredients[_ngcontent-%COMP%]{grid-column:span 2;display:flex;flex-wrap:wrap}.pie-recipe__ingredients__item[_ngcontent-%COMP%]{flex:1;padding:0 40px 0 0}.pie-recipe__ingredients__item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font:italic 20px/1.1 Playfair Display,serif;color:#2b6d04;margin:30px 0 10px;font-size:25px}.pie-recipe__ingredients__item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}.pie-recipe__ingredients__item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#000;padding:5px 0;font-size:larger}.pie-recipe__number[_ngcontent-%COMP%]{font:italic 30px/1 Playfair Display,serif;color:#d69762;place-self:center;margin-top:-15px}.pie-recipe__steps[_ngcontent-%COMP%]{padding-right:35px}.pie-recipe__subtitle[_ngcontent-%COMP%]{font:italic 30px/1 Playfair Display,serif;color:#916953;margin:45px 0 10px;grid-column:span 2}.pie-recipe__tips[_ngcontent-%COMP%]{grid-column:span 2;margin-top:65px;position:relative;border:2px solid #916953;box-shadow:inset 0 0 0 2px #fff,inset 0 0 0 4px #916953;text-align:center;padding:35px}.pie-recipe__tips[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:inline-block;padding:10px;position:absolute;margin:auto;left:0;right:0;top:-40px;width:auto;background:#fff;width:60px;fill:#916953}.pie-recipe__tips[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font:900 24px Raleway;text-transform:uppercase;margin:10px 0 15px;color:#543b2e}\"]\n      });\n    }\n  }\n  return BookDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}