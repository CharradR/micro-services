{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/keycloak.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction LoginComponent_div_5_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Redirecting...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_5_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\uD83D\\uDD10 Login with Keycloak\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_5_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.errorMessage, \" \");\n  }\n}\nfunction LoginComponent_div_5_div_10_div_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \" Username is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_5_div_10_div_10_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \" Minimum 3 characters required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_5_div_10_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, LoginComponent_div_5_div_10_div_10_div_1_Template, 2, 0, \"div\", 20);\n    i0.ɵɵtemplate(2, LoginComponent_div_5_div_10_div_10_div_2_Template, 2, 0, \"div\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.loginForm.controls[\"username\"] == null ? null : ctx_r6.loginForm.controls[\"username\"].errors == null ? null : ctx_r6.loginForm.controls[\"username\"].errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.loginForm.controls[\"username\"] == null ? null : ctx_r6.loginForm.controls[\"username\"].errors == null ? null : ctx_r6.loginForm.controls[\"username\"].errors[\"minlength\"]);\n  }\n}\nfunction LoginComponent_div_5_div_10_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \" Password is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_5_div_10_div_15_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \" Minimum 6 characters required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_5_div_10_div_15_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \" Maximum 50 characters allowed \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_5_div_10_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, LoginComponent_div_5_div_10_div_15_div_1_Template, 2, 0, \"div\", 20);\n    i0.ɵɵtemplate(2, LoginComponent_div_5_div_10_div_15_div_2_Template, 2, 0, \"div\", 20);\n    i0.ɵɵtemplate(3, LoginComponent_div_5_div_10_div_15_div_3_Template, 2, 0, \"div\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.loginForm.controls[\"password\"] == null ? null : ctx_r7.loginForm.controls[\"password\"].errors == null ? null : ctx_r7.loginForm.controls[\"password\"].errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.loginForm.controls[\"password\"] == null ? null : ctx_r7.loginForm.controls[\"password\"].errors == null ? null : ctx_r7.loginForm.controls[\"password\"].errors[\"minlength\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.loginForm.controls[\"password\"] == null ? null : ctx_r7.loginForm.controls[\"password\"].errors == null ? null : ctx_r7.loginForm.controls[\"password\"].errors[\"minlength\"]);\n  }\n}\nfunction LoginComponent_div_5_div_10_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Logging in...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_5_div_10_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Manual Login\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_5_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelement(1, \"hr\");\n    i0.ɵɵelementStart(2, \"p\")(3, \"small\");\n    i0.ɵɵtext(4, \"For testing purposes only:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"form\", 15);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_div_5_div_10_Template_form_ngSubmit_5_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.manualLogin());\n    });\n    i0.ɵɵelementStart(6, \"div\")(7, \"div\", 16);\n    i0.ɵɵtext(8, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, LoginComponent_div_5_div_10_div_10_Template, 3, 2, \"div\", 5);\n    i0.ɵɵelementStart(11, \"div\")(12, \"div\", 16);\n    i0.ɵɵtext(13, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, LoginComponent_div_5_div_10_div_15_Template, 4, 3, \"div\", 5);\n    i0.ɵɵelementStart(16, \"div\")(17, \"button\", 19);\n    i0.ɵɵtemplate(18, LoginComponent_div_5_div_10_span_18_Template, 2, 0, \"span\", 5);\n    i0.ɵɵtemplate(19, LoginComponent_div_5_div_10_span_19_Template, 2, 0, \"span\", 5);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"formGroup\", ctx_r5.loginForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.loginForm.controls[\"username\"].invalid && (ctx_r5.loginForm.controls[\"username\"].touched || ctx_r5.loginForm.controls[\"username\"].dirty));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.loginForm.controls[\"password\"].invalid && (ctx_r5.loginForm.controls[\"password\"].touched || ctx_r5.loginForm.controls[\"password\"].dirty));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r5.loginForm.invalid || ctx_r5.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r5.isLoading);\n  }\n}\nfunction LoginComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 7);\n    i0.ɵɵtext(2, \"Login to Education Platform\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 8)(4, \"p\", 9);\n    i0.ɵɵtext(5, \" Click the button below to login securely through our authentication system. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_5_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.login());\n    });\n    i0.ɵɵtemplate(7, LoginComponent_div_5_span_7_Template, 2, 0, \"span\", 5);\n    i0.ɵɵtemplate(8, LoginComponent_div_5_span_8_Template, 2, 0, \"span\", 5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(9, LoginComponent_div_5_div_9_Template, 2, 1, \"div\", 11);\n    i0.ɵɵtemplate(10, LoginComponent_div_5_div_10_Template, 20, 6, \"div\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.errorMessage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", false);\n  }\n}\nfunction LoginComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"div\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 23)(4, \"p\")(5, \"strong\");\n    i0.ɵɵtext(6, \"Email:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\")(9, \"strong\");\n    i0.ɵɵtext(10, \"Username:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\")(13, \"strong\");\n    i0.ɵɵtext(14, \"Roles:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"p\")(17, \"strong\");\n    i0.ɵɵtext(18, \"Email Verified:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\")(21, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_6_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.logout());\n    });\n    i0.ɵɵtext(22, \" Logout \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Welcome, \", ctx_r1.userProfile.name, \"!\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.userProfile.email, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.userProfile.preferred_username, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.userProfile.roles.join(\", \"), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.userProfile.email_verified ? \"Yes\" : \"No\", \"\");\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(formBuilder, keycloakService, router, route) {\n      this.formBuilder = formBuilder;\n      this.keycloakService = keycloakService;\n      this.router = router;\n      this.route = route;\n      this.isLoading = false;\n      this.errorMessage = '';\n      this.userProfile = null;\n      this.returnUrl = '';\n    }\n    ngOnInit() {\n      // Initialize Keycloak service first\n      this.keycloakService.init();\n      this.loginForm = this.formBuilder.group({\n        username: [\"\", [Validators.required, Validators.minLength(3)]],\n        password: [\"\", [Validators.required, Validators.minLength(6), Validators.maxLength(50)]]\n      });\n      // Check if already authenticated\n      this.keycloakService.userProfile$.subscribe(profile => {\n        this.userProfile = profile;\n        if (profile) {\n          // Already logged in, redirect to home or return URL\n          this.router.navigate([this.returnUrl]);\n        }\n      });\n    }\n    /**\r\n     * Login using Keycloak OAuth2 flow (redirect to Keycloak)\r\n     */\n    login() {\n      console.log('Redirecting to Keycloak login...');\n      this.keycloakService.login();\n    }\n    /**\r\n     * Alternative: Manual login (for testing only - not recommended for production)\r\n     */\n    manualLogin() {\n      console.log(\"Manual login attempted - redirecting to OAuth flow instead\");\n      this.login();\n    }\n    signup() {\n      console.log(\"Here Object Signup\", this.loginForm.value);\n      // You can add signup logic here or navigate to signup page\n      this.router.navigate(['/signup']);\n    }\n    logout() {\n      this.keycloakService.logout().subscribe(() => {\n        this.userProfile = null;\n        this.loginForm.reset();\n      });\n    }\n    static {\n      this.ɵfac = function LoginComponent_Factory(t) {\n        return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.KeycloakService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LoginComponent,\n        selectors: [[\"app-login\"]],\n        decls: 7,\n        vars: 2,\n        consts: [[1, \"contact_info_container\"], [1, \"container\"], [1, \"row\"], [1, \"col-lg-8\", \"mx-auto\"], [1, \"contact_form\"], [4, \"ngIf\"], [\"class\", \"user-info-container\", 4, \"ngIf\"], [1, \"contact_info_title\"], [1, \"keycloak-login-section\"], [1, \"login-description\"], [\"type\", \"button\", 1, \"keycloak-login-button\", 3, \"disabled\", \"click\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"manual-login-toggle\", 4, \"ngIf\"], [1, \"alert\", \"alert-danger\"], [1, \"manual-login-toggle\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form_title\"], [\"type\", \"text\", \"formControlName\", \"username\", \"required\", \"required\", 1, \"comment_input\"], [\"type\", \"password\", \"formControlName\", \"password\", \"required\", \"required\", 1, \"comment_input\"], [\"type\", \"submit\", 1, \"comment_button\", \"trans_200\", 3, \"disabled\"], [\"class\", \"red\", 4, \"ngIf\"], [1, \"red\"], [1, \"user-info-container\"], [1, \"user-details\"], [\"type\", \"button\", 1, \"comment_button\", \"trans_200\", 2, \"background-color\", \"#dc3545\", 3, \"click\"]],\n        template: function LoginComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n            i0.ɵɵtemplate(5, LoginComponent_div_5_Template, 11, 5, \"div\", 5);\n            i0.ɵɵtemplate(6, LoginComponent_div_6_Template, 23, 5, \"div\", 6);\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", !ctx.userProfile);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.userProfile);\n          }\n        },\n        dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName],\n        styles: [\".red[_ngcontent-%COMP%]{color:red}.alert[_ngcontent-%COMP%]{padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-danger[_ngcontent-%COMP%]{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb}.user-info-container[_ngcontent-%COMP%]{background-color:#d4edda;border:1px solid #c3e6cb;border-radius:.25rem;padding:1rem;margin-top:1rem}.user-details[_ngcontent-%COMP%]{margin:1rem 0}.user-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;color:#155724}.comment_button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.comment_button[_ngcontent-%COMP%]:disabled:hover{background-color:#6c757d!important}.keycloak-login-section[_ngcontent-%COMP%]{text-align:center;padding:2rem 1rem;background-color:#f8f9fa;border-radius:.5rem;margin:1rem 0;border:2px dashed #dee2e6}.login-description[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:1.5rem;font-size:1.1rem;line-height:1.5}.keycloak-login-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff 0%,#0056b3 100%);color:#fff;border:none;padding:1rem 2rem;font-size:1.2rem;font-weight:600;border-radius:.5rem;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 6px #007bff4d;min-width:250px;display:inline-flex;align-items:center;justify-content:center;text-decoration:none}.keycloak-login-button[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#0056b3 0%,#004085 100%);transform:translateY(-2px);box-shadow:0 6px 12px #007bff66}.keycloak-login-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #007bff4d}.keycloak-login-button[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}.manual-login-toggle[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1rem;border-top:1px solid #dee2e6}.manual-login-toggle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:0;height:1px;background:#dee2e6;margin:1rem 0}.manual-login-toggle[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-style:italic}\"]\n      });\n    }\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}