{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/book.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ManageBooksComponent_tr_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"tr\")(1, \"td\");\n    i0.ÉµÉµtext(2);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"td\");\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"td\");\n    i0.ÉµÉµtext(6);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"td\");\n    i0.ÉµÉµtext(8);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(9, \"td\");\n    i0.ÉµÉµtext(10);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(11, \"td\")(12, \"button\", 11);\n    i0.ÉµÉµlistener(\"click\", function ManageBooksComponent_tr_25_Template_button_click_12_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r4);\n      const book_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r3.editBook(book_r2));\n    });\n    i0.ÉµÉµtext(13, \"Edit\");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(14, \"td\")(15, \"button\", 12);\n    i0.ÉµÉµlistener(\"click\", function ManageBooksComponent_tr_25_Template_button_click_15_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r4);\n      const book_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r5.deleteBook(book_r2));\n    });\n    i0.ÉµÉµtext(16, \"Delete\");\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const book_r2 = ctx.$implicit;\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(book_r2.title);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(book_r2.author);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(book_r2.category);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(book_r2.available);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(book_r2.quantity);\n  }\n}\nfunction ManageBooksComponent_div_26_h3_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"h3\");\n    i0.ÉµÉµtext(1, \"Edit Book\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ManageBooksComponent_div_26_h3_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"h3\");\n    i0.ÉµÉµtext(1, \"Add Book\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ManageBooksComponent_div_26_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 30);\n    i0.ÉµÉµtext(1, \"Please input title\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ManageBooksComponent_div_26_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 30);\n    i0.ÉµÉµtext(1, \"Please input author\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ManageBooksComponent_div_26_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 30);\n    i0.ÉµÉµtext(1, \"Please input category\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ManageBooksComponent_div_26_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 30);\n    i0.ÉµÉµtext(1, \"Please input availability\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ManageBooksComponent_div_26_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 30);\n    i0.ÉµÉµtext(1, \"Please input quantity\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction ManageBooksComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 13);\n    i0.ÉµÉµtemplate(1, ManageBooksComponent_div_26_h3_1_Template, 2, 0, \"h3\", 14);\n    i0.ÉµÉµtemplate(2, ManageBooksComponent_div_26_h3_2_Template, 2, 0, \"h3\", 14);\n    i0.ÉµÉµelementStart(3, \"form\", null, 15)(5, \"div\", 16)(6, \"label\", 17);\n    i0.ÉµÉµtext(7, \"Title\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(8, \"input\", 18);\n    i0.ÉµÉµlistener(\"ngModelChange\", function ManageBooksComponent_div_26_Template_input_ngModelChange_8_listener($event) {\n      i0.ÉµÉµrestoreView(_r15);\n      const ctx_r14 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r14.formData.title = $event);\n    });\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(9, ManageBooksComponent_div_26_div_9_Template, 2, 0, \"div\", 19);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(10, \"div\", 16)(11, \"label\", 20);\n    i0.ÉµÉµtext(12, \"Author\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(13, \"input\", 21);\n    i0.ÉµÉµlistener(\"ngModelChange\", function ManageBooksComponent_div_26_Template_input_ngModelChange_13_listener($event) {\n      i0.ÉµÉµrestoreView(_r15);\n      const ctx_r16 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r16.formData.author = $event);\n    });\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(14, ManageBooksComponent_div_26_div_14_Template, 2, 0, \"div\", 19);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(15, \"div\", 16)(16, \"label\", 22);\n    i0.ÉµÉµtext(17, \"Category\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(18, \"input\", 23);\n    i0.ÉµÉµlistener(\"ngModelChange\", function ManageBooksComponent_div_26_Template_input_ngModelChange_18_listener($event) {\n      i0.ÉµÉµrestoreView(_r15);\n      const ctx_r17 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r17.formData.category = $event);\n    });\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(19, ManageBooksComponent_div_26_div_19_Template, 2, 0, \"div\", 19);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(20, \"div\", 16)(21, \"label\", 24);\n    i0.ÉµÉµtext(22, \"Available\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(23, \"input\", 25);\n    i0.ÉµÉµlistener(\"ngModelChange\", function ManageBooksComponent_div_26_Template_input_ngModelChange_23_listener($event) {\n      i0.ÉµÉµrestoreView(_r15);\n      const ctx_r18 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r18.formData.available = $event);\n    });\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(24, ManageBooksComponent_div_26_div_24_Template, 2, 0, \"div\", 19);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(25, \"div\", 16)(26, \"label\", 26);\n    i0.ÉµÉµtext(27, \"Quantity\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(28, \"input\", 27);\n    i0.ÉµÉµlistener(\"ngModelChange\", function ManageBooksComponent_div_26_Template_input_ngModelChange_28_listener($event) {\n      i0.ÉµÉµrestoreView(_r15);\n      const ctx_r19 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r19.formData.quantity = $event);\n    });\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(29, ManageBooksComponent_div_26_div_29_Template, 2, 0, \"div\", 19);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(30, \"button\", 11);\n    i0.ÉµÉµlistener(\"click\", function ManageBooksComponent_div_26_Template_button_click_30_listener() {\n      i0.ÉµÉµrestoreView(_r15);\n      const ctx_r20 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r20.saveBook());\n    });\n    i0.ÉµÉµelement(31, \"i\", 28);\n    i0.ÉµÉµtext(32, \" Save \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(33, \"button\", 29);\n    i0.ÉµÉµlistener(\"click\", function ManageBooksComponent_div_26_Template_button_click_33_listener() {\n      i0.ÉµÉµrestoreView(_r15);\n      const ctx_r21 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r21.cancelForm());\n    });\n    i0.ÉµÉµtext(34, \"Cancel\");\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const _r8 = i0.ÉµÉµreference(4);\n    const ctx_r1 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r1.isEditing);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", !ctx_r1.isEditing);\n    i0.ÉµÉµadvance(6);\n    i0.ÉµÉµproperty(\"ngModel\", ctx_r1.formData.title);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", _r8.submitted && !ctx_r1.formData.title);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngModel\", ctx_r1.formData.author);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", _r8.submitted && !ctx_r1.formData.author);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngModel\", ctx_r1.formData.category);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", _r8.submitted && !ctx_r1.formData.category);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngModel\", ctx_r1.formData.available);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", _r8.submitted && !ctx_r1.formData.available);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngModel\", ctx_r1.formData.quantity);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", _r8.submitted && !ctx_r1.formData.quantity);\n  }\n}\nexport class ManageBooksComponent {\n  constructor(bookService) {\n    this.bookService = bookService;\n    this.editIndex = null;\n    this.formData = {\n      id: '',\n      title: '',\n      author: '',\n      category: '',\n      available: false,\n      quantity: 0\n    };\n    this.books = [];\n    this.isFormVisible = false;\n    this.isEditing = false;\n    this.searchTitle = '';\n  }\n  ngOnInit() {\n    this.bookService.getBooks().subscribe({\n      next: data => this.books = data,\n      error: err => console.error('Error fetching books:', err)\n    });\n  }\n  get filteredBooks() {\n    if (!this.searchTitle) {\n      return this.books;\n    }\n    const query = this.searchTitle.trim().toLowerCase();\n    return this.books.filter(book => book.title && book.title.toLowerCase().includes(query));\n  }\n  // âž• Ajouter un livre\n  addBook() {\n    this.isFormVisible = true;\n    this.isEditing = false;\n    this.editIndex = null;\n    this.formData = {\n      id: '',\n      title: '',\n      author: '',\n      category: '',\n      available: false,\n      quantity: 0\n    };\n  }\n  // âœï¸ Modifier un livre\n  editBook(book) {\n    this.isFormVisible = true;\n    this.isEditing = true;\n    this.formData = {\n      ...book\n    }; // copie TOUT, y compris id (mÃªme si on ne l'affiche pas)\n    this.editIndex = this.books.findIndex(b => b.id === book.id);\n  }\n  // ðŸ’¾ Enregistrer (ajout ou modification)\n  saveBook() {\n    if (this.isEditing && this.formData.id) {\n      // mode Ã©dition\n      this.bookService.updateBook(this.formData.id, this.formData).subscribe({\n        next: updated => {\n          if (this.editIndex !== null) {\n            this.books[this.editIndex] = updated;\n          }\n          this.isFormVisible = false;\n        },\n        error: err => console.error('Failed to update book:', err)\n      });\n    } else {\n      // mode ajout\n      this.bookService.addBook(this.formData).subscribe({\n        next: created => {\n          this.books.push(created);\n          this.isFormVisible = false;\n        },\n        error: err => console.error('Failed to add book:', err)\n      });\n    }\n  }\n  // âŒ Supprimer un livre\n  deleteBook(book) {\n    if (book.id && confirm(`Are you sure you want to delete \"${book.title}\"?`)) {\n      this.bookService.deleteBook(book.id).subscribe({\n        next: () => {\n          this.books = this.books.filter(b => b.id !== book.id);\n        },\n        error: err => console.error('Failed to delete book:', err)\n      });\n    }\n  }\n  // ðŸ”™ Annuler formulaire\n  cancelForm() {\n    this.isFormVisible = false;\n  }\n  static {\n    this.Éµfac = function ManageBooksComponent_Factory(t) {\n      return new (t || ManageBooksComponent)(i0.ÉµÉµdirectiveInject(i1.BookService));\n    };\n  }\n  static {\n    this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: ManageBooksComponent,\n      selectors: [[\"app-manage-books\"]],\n      decls: 27,\n      vars: 3,\n      consts: [[1, \"container\", \"crud-table\"], [1, \"clearfix\", \"mb-3\"], [1, \"form-inline\", \"pull-left\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"glyphicon\", \"glyphicon-plus\"], [1, \"form-inline\", \"pull-right\"], [\"type\", \"text\", \"placeholder\", \"Type title to search\", 1, \"form-control\", \"ml-2\", 3, \"ngModel\", \"ngModelChange\"], [1, \"table\", \"table-striped\"], [1, \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"crude-form__wrapper\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"crude-form__wrapper\"], [4, \"ngIf\"], [\"bookForm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"title\"], [\"id\", \"edittitle\", \"type\", \"text\", \"name\", \"title\", \"required\", \"\", \"placeholder\", \"Enter title\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"for\", \"author\"], [\"id\", \"editAuthor\", \"type\", \"text\", \"name\", \"author\", \"required\", \"\", \"placeholder\", \"Enter author\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"category\"], [\"id\", \"editCategory\", \"type\", \"text\", \"name\", \"category\", \"required\", \"\", \"placeholder\", \"Enter category\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"available\"], [\"id\", \"editAvailable\", \"type\", \"text\", \"name\", \"available\", \"required\", \"\", \"placeholder\", \"Enter availability\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"quantity\"], [\"id\", \"editQuantity\", \"type\", \"text\", \"name\", \"quantity\", \"required\", \"\", \"placeholder\", \"Enter quantity\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"glyphicon\", \"glyphicon-pencil\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"alert\", \"alert-danger\"]],\n      template: function ManageBooksComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"button\", 3);\n          i0.ÉµÉµlistener(\"click\", function ManageBooksComponent_Template_button_click_3_listener() {\n            return ctx.addBook();\n          });\n          i0.ÉµÉµelement(4, \"span\", 4);\n          i0.ÉµÉµtext(5, \" Add more book \");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(6, \"div\", 5);\n          i0.ÉµÉµtext(7, \" Search by title: \");\n          i0.ÉµÉµelementStart(8, \"input\", 6);\n          i0.ÉµÉµlistener(\"ngModelChange\", function ManageBooksComponent_Template_input_ngModelChange_8_listener($event) {\n            return ctx.searchTitle = $event;\n          });\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµelementStart(9, \"table\", 7)(10, \"thead\")(11, \"tr\")(12, \"th\");\n          i0.ÉµÉµtext(13, \"Title\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(14, \"th\");\n          i0.ÉµÉµtext(15, \"Author\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(16, \"th\");\n          i0.ÉµÉµtext(17, \"Category\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(18, \"th\");\n          i0.ÉµÉµtext(19, \"Availability\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(20, \"th\");\n          i0.ÉµÉµtext(21, \"Quantity\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelement(22, \"th\")(23, \"th\");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(24, \"tbody\", 8);\n          i0.ÉµÉµtemplate(25, ManageBooksComponent_tr_25_Template, 17, 5, \"tr\", 9);\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµtemplate(26, ManageBooksComponent_div_26_Template, 35, 12, \"div\", 10);\n        }\n        if (rf & 2) {\n          i0.ÉµÉµadvance(8);\n          i0.ÉµÉµproperty(\"ngModel\", ctx.searchTitle);\n          i0.ÉµÉµadvance(17);\n          i0.ÉµÉµproperty(\"ngForOf\", ctx.filteredBooks);\n          i0.ÉµÉµadvance(1);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.isFormVisible);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.ÉµNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n      styles: [\"th[_ngcontent-%COMP%] {\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.glyphicon[_ngcontent-%COMP%] {\\r\\n  margin-right: 10px;\\r\\n}\\r\\n\\r\\n.crud-table[_ngcontent-%COMP%] {\\r\\n  max-width: 800px;\\r\\n  padding: 40px 0;\\r\\n}\\r\\n\\r\\n.form-alert[_ngcontent-%COMP%] {\\r\\n  margin-top: 10px;\\r\\n}\\r\\n\\r\\n.form-inline[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 20px;\\r\\n}\\r\\n.container[_ngcontent-%COMP%]{\\r\\n    margin-top:50px\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZS1ib29rcy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7QUFDQTtJQUNJO0FBQ0oiLCJmaWxlIjoibWFuYWdlLWJvb2tzLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJ0aCB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4uZ2x5cGhpY29uIHtcclxuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbn1cclxuXHJcbi5jcnVkLXRhYmxlIHtcclxuICBtYXgtd2lkdGg6IDgwMHB4O1xyXG4gIHBhZGRpbmc6IDQwcHggMDtcclxufVxyXG5cclxuLmZvcm0tYWxlcnQge1xyXG4gIG1hcmdpbi10b3A6IDEwcHg7XHJcbn1cclxuXHJcbi5mb3JtLWlubGluZSB7XHJcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxufVxyXG4uY29udGFpbmVye1xyXG4gICAgbWFyZ2luLXRvcDo1MHB4XHJcbn0iXX0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9tYW5hZ2UtYm9va3MvbWFuYWdlLWJvb2tzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjtBQUNBO0lBQ0k7QUFDSjtBQUNBLDR6QkFBNHpCIiwic291cmNlc0NvbnRlbnQiOlsidGgge1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLmdseXBoaWNvbiB7XHJcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG59XHJcblxyXG4uY3J1ZC10YWJsZSB7XHJcbiAgbWF4LXdpZHRoOiA4MDBweDtcclxuICBwYWRkaW5nOiA0MHB4IDA7XHJcbn1cclxuXHJcbi5mb3JtLWFsZXJ0IHtcclxuICBtYXJnaW4tdG9wOiAxMHB4O1xyXG59XHJcblxyXG4uZm9ybS1pbmxpbmUge1xyXG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbn1cclxuLmNvbnRhaW5lcntcclxuICAgIG1hcmdpbi10b3A6NTBweFxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","ManageBooksComponent","constructor","bookService","id","title","author","category","available","quantity","ngOnInit","getBooks","subscribe","next","data","books","error","err","console","filteredBooks","searchTitle","query","trim","toLowerCase","filter","book","includes","addBook","isFormVisible","isEditing","editIndex","formData","editBook","findIndex","b","saveBook","updateBook","updated","created","push","deleteBook","confirm","cancelForm","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\donia\\Desktop\\micro-services\\educationProject\\src\\app\\components\\manage-books\\manage-books.component.html","C:\\Users\\donia\\Desktop\\micro-services\\educationProject\\src\\app\\components\\manage-books\\manage-books.component.ts"],"sourcesContent":["<div class=\"container crud-table\">\n    <div class=\"clearfix mb-3\">\n        <div class=\"form-inline pull-left\">\n            <button class=\"btn btn-success\" (click)=\"addBook()\" >\n                <span class=\"glyphicon glyphicon-plus\"></span>\n                Add more book\n            </button>\n        </div>\n\n        <div class=\"form-inline pull-right\">\n            Search by title:\n            <input class=\"form-control ml-2\" type=\"text\" [(ngModel)]=\"searchTitle\" placeholder=\"Type title to search\" />\n        </div>\n    </div>\n\n    <table class=\"table table-striped\">\n        <thead>\n            <tr>\n                <th>Title</th>\n                <th>Author</th>\n                <th>Category</th>\n                <th>Availability</th>\n                 <th>Quantity</th>\n                <th></th>\n                <th></th>\n            </tr>\n        </thead>\n\n        <tbody class=\"text-center\">\n            <!-- On parcourt la liste filtrÃ©e -->\n            <tr *ngFor=\"let book of filteredBooks\">\n\n                <td>{{ book.title }}</td>\n                <td>{{ book.author }}</td>\n                <td>{{ book.category }}</td>\n                <td>{{ book.available }}</td>\n                <td>{{ book.quantity }}</td>\n\n                <td>\n                    <button class=\"btn btn-primary\" (click)=\"editBook(book)\">Edit</button>\n                </td>\n                <td>\n                    <button class=\"btn btn-danger\" (click)=\"deleteBook(book)\" >Delete</button>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n<div class=\"crude-form__wrapper\" *ngIf=\"isFormVisible\">\n  <h3 *ngIf=\"isEditing\">Edit Book</h3>\n  <h3 *ngIf=\"!isEditing\">Add Book</h3>\n\n  <form #bookForm=\"ngForm\">\n    <div class=\"form-group\">\n      <label for=\"title\">Title</label>\n      <input class=\"form-control\" id=\"edittitle\" type=\"text\" name=\"title\" [(ngModel)]=\"formData.title\"\n        required placeholder=\"Enter title\" />\n      <div class=\"alert alert-danger\" *ngIf=\"bookForm.submitted && !formData.title\">Please input title</div>\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"author\">Author</label>\n      <input class=\"form-control\" id=\"editAuthor\" type=\"text\" name=\"author\" [(ngModel)]=\"formData.author\"\n        required placeholder=\"Enter author\" />\n      <div class=\"alert alert-danger\" *ngIf=\"bookForm.submitted && !formData.author\">Please input author</div>\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"category\">Category</label>\n      <input class=\"form-control\" id=\"editCategory\" type=\"text\" name=\"category\" [(ngModel)]=\"formData.category\"\n        required placeholder=\"Enter category\" />\n      <div class=\"alert alert-danger\" *ngIf=\"bookForm.submitted && !formData.category\">Please input category</div>\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"available\">Available</label>\n      <input class=\"form-control\" id=\"editAvailable\" type=\"text\" name=\"available\" [(ngModel)]=\"formData.available\"\n        required placeholder=\"Enter availability\" />\n      <div class=\"alert alert-danger\" *ngIf=\"bookForm.submitted && !formData.available\">Please input availability</div>\n    </div>\n  <div class=\"form-group\">\n      <label for=\"quantity\">Quantity</label>\n      <input class=\"form-control\" id=\"editQuantity\" type=\"text\" name=\"quantity\" [(ngModel)]=\"formData.quantity\"\n        required placeholder=\"Enter quantity\" />\n      <div class=\"alert alert-danger\" *ngIf=\"bookForm.submitted && !formData.quantity\">Please input quantity</div>\n    </div>\n\n    <button class=\"btn btn-primary\" (click)=\"saveBook()\">\n      <i class=\"glyphicon glyphicon-pencil\"></i> Save\n    </button>\n    <button class=\"btn btn-secondary\" (click)=\"cancelForm()\">Cancel</button>\n  </form>\n</div>\n\n","import { Component, OnInit } from '@angular/core';\nimport { Book, BookService } from 'src/app/services/book.service';\n@Component({\n  selector: 'app-manage-books',\n  templateUrl: './manage-books.component.html',\n  styleUrls: ['./manage-books.component.css']\n})\nexport class ManageBooksComponent {\n editIndex: number | null = null;\n\n  formData: Book = {\n    id: '',\n    title: '',\n    author: '',\n    category: '',\n    available: false,\n    quantity: 0,\n  };\n  books: Book[] = [];\n  constructor(private bookService: BookService) { }\n  isFormVisible = false;\n  isEditing = false;\n  searchTitle = '';\n\n  ngOnInit(): void {\n    this.bookService.getBooks().subscribe({\n      next: data => (this.books = data),\n      error: err => console.error('Error fetching books:', err)\n    });\n  }\n  get filteredBooks(): Book[] {\n    if (!this.searchTitle) {\n      return this.books;\n    }\n    const query = this.searchTitle.trim().toLowerCase();\n    return this.books.filter(book =>\n      book.title && book.title.toLowerCase().includes(query)\n    );\n\n  }\n\n  // âž• Ajouter un livre\n  addBook(): void {\n    this.isFormVisible = true;\n    this.isEditing = false;\n    this.editIndex = null;\n    this.formData = {\n      id: '',\n      title: '',\n      author: '',\n      category: '',\n      available: false,\n      quantity: 0\n    };\n  }\n\n  // âœï¸ Modifier un livre\n  editBook(book: Book): void {\n    this.isFormVisible = true;\n    this.isEditing = true;\n    this.formData = { ...book }; // copie TOUT, y compris id (mÃªme si on ne l'affiche pas)\n    this.editIndex = this.books.findIndex(b => b.id === book.id);\n  }\n\n\n  // ðŸ’¾ Enregistrer (ajout ou modification)\n  saveBook(): void {\n    if (this.isEditing && this.formData.id) {\n      // mode Ã©dition\n      this.bookService.updateBook(this.formData.id, this.formData).subscribe({\n        next: updated => {\n          if (this.editIndex !== null) {\n            this.books[this.editIndex] = updated;\n          }\n          this.isFormVisible = false;\n        },\n        error: err => console.error('Failed to update book:', err)\n      });\n    } else {\n      // mode ajout\n      this.bookService.addBook(this.formData).subscribe({\n        next: created => {\n          this.books.push(created);\n          this.isFormVisible = false;\n        },\n        error: err => console.error('Failed to add book:', err)\n      });\n    }\n  }\n\n  // âŒ Supprimer un livre\n  deleteBook(book: Book): void {\n    if (book.id && confirm(`Are you sure you want to delete \"${book.title}\"?`)) {\n      this.bookService.deleteBook(book.id).subscribe({\n        next: () => {\n          this.books = this.books.filter(b => b.id !== book.id);\n        },\n        error: err => console.error('Failed to delete book:', err)\n      });\n    }\n  }\n\n  // ðŸ”™ Annuler formulaire\n  cancelForm(): void {\n    this.isFormVisible = false;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}